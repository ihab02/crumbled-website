(()=>{var e={};e.id=5920,e.ids=[5920],e.modules={72934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},54580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},45869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},20399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},75981:(e,t,a)=>{"use strict";a.r(t),a.d(t,{GlobalError:()=>l.a,__next_app__:()=>h,originalPathname:()=>u,pages:()=>c,routeModule:()=>m,tree:()=>o}),a(38358),a(90596),a(20172),a(35866);var r=a(23191),s=a(88716),i=a(37922),l=a.n(i),n=a(95231),d={};for(let e in n)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(d[e]=()=>n[e]);a.d(t,d);let o=["",{children:["admin",{children:["login",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(a.bind(a,38358)),"C:\\Users\\ASUS\\AngularWebApp\\crumbled-website\\app\\admin\\login\\page.tsx"]}]},{}]},{layout:[()=>Promise.resolve().then(a.bind(a,90596)),"C:\\Users\\ASUS\\AngularWebApp\\crumbled-website\\app\\admin\\layout.tsx"]}]},{layout:[()=>Promise.resolve().then(a.bind(a,20172)),"C:\\Users\\ASUS\\AngularWebApp\\crumbled-website\\app\\layout.tsx"],"not-found":[()=>Promise.resolve().then(a.t.bind(a,35866,23)),"next/dist/client/components/not-found-error"]}],c=["C:\\Users\\ASUS\\AngularWebApp\\crumbled-website\\app\\admin\\login\\page.tsx"],u="/admin/login/page",h={require:a,loadChunk:()=>Promise.resolve()},m=new r.AppPageRouteModule({definition:{kind:s.x.APP_PAGE,page:"/admin/login/page",pathname:"/admin/login",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:o}})},19080:(e,t,a)=>{Promise.resolve().then(a.bind(a,92837))},83073:(e,t,a)=>{Promise.resolve().then(a.bind(a,79718))},92837:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>P});var r=a(10326),s=a(35047),i=a(90434),l=a(77863),n=a(51593),d=a(24319),o=a(57671),c=a(14228),u=a(66050),h=a(48705),m=a(5751),p=a(40765),y=a(71709),g=a(24061),x=a(22915),f=a(95396),k=a(53468),b=a(40617),v=a(36283),w=a(88378),Z=a(5932),j=a(88319),M=a(79635),A=a(71810);let N=[{title:"Dashboard",href:"/admin",icon:d.Z},{title:"Orders",href:"/admin/orders",icon:o.Z},{title:"Delivery Management",href:"/admin/delivery-management",icon:c.Z},{title:"Stock Management",href:"/admin/stock",icon:u.Z},{title:"Products",href:"/admin/products",icon:h.Z},{title:"Flavors",href:"/admin/flavors",icon:m.Z},{title:"Product Types",href:"/admin/product-types",icon:p.Z},{title:"Sliding Media",href:"/admin/sliding-media",icon:y.Z},{title:"Customers",href:"/admin/customers",icon:g.Z},{title:"Categories",href:"/admin/categories",icon:x.Z},{title:"Analytics",href:"/admin/analytics",icon:f.Z},{title:"Customer Insights",href:"/admin/customer-insights",icon:k.Z},{title:"Messages",href:"/admin/messages",icon:b.Z},{title:"Reports",href:"/admin/reports",icon:v.Z},{title:"Settings",href:"/admin/settings",icon:w.Z,submenu:[{title:"General",href:"/admin/settings",icon:w.Z},{title:"Email",href:"/admin/settings/email",icon:Z.Z},{title:"Order Mode",href:"/admin/order-mode",icon:j.Z}]}];function S(){let e=(0,s.usePathname)(),{user:t,logout:a,loading:d}=(0,n.J)();console.log("SideMenu render:",{user:t,loading:d,pathname:e});let o=t=>e===t,c=e.startsWith("/admin/settings");return(0,r.jsxs)("div",{className:"flex h-full w-64 flex-col border-r bg-white",children:[r.jsx("div",{className:"flex h-14 items-center border-b px-4",children:(0,r.jsxs)(i.default,{href:"/admin",className:"flex items-center gap-2 font-semibold",children:[r.jsx(x.Z,{className:"h-6 w-6"}),r.jsx("span",{children:"Crumbled Admin"})]})}),t&&(0,r.jsxs)("div",{className:"border-b px-4 py-3",children:[(0,r.jsxs)("div",{className:"flex items-center gap-2 text-sm",children:[r.jsx(M.Z,{className:"h-4 w-4 text-gray-500"}),r.jsx("span",{className:"font-medium text-gray-900",children:t.username})]}),r.jsx("div",{className:"text-xs text-gray-500 mt-1",children:"Administrator"})]}),r.jsx("nav",{className:"flex-1 space-y-1 p-2",children:N.map(e=>{let t=o(e.href),a=e.submenu&&(t||c);return(0,r.jsxs)("div",{children:[(0,r.jsxs)(i.default,{href:e.href,className:(0,l.cn)("flex items-center gap-3 rounded-lg px-3 py-2 text-sm transition-colors",t?"bg-pink-100 text-pink-600":"text-gray-600 hover:bg-gray-100"),children:[r.jsx(e.icon,{className:"h-5 w-5"}),e.title]}),a&&r.jsx("div",{className:"ml-6 mt-1 space-y-1",children:e.submenu.map(e=>(0,r.jsxs)(i.default,{href:e.href,className:(0,l.cn)("flex items-center gap-3 rounded-lg px-3 py-2 text-sm transition-colors",o(e.href)?"bg-pink-100 text-pink-600":"text-gray-600 hover:bg-gray-100"),children:[r.jsx(e.icon,{className:"h-5 w-5"}),e.title]},e.href))})]},e.href)})}),(0,r.jsxs)("div",{className:"border-t p-2 text-xs text-gray-500",children:[(0,r.jsxs)("div",{children:["User: ",t?t.username:"None"]}),(0,r.jsxs)("div",{children:["Loading: ",d?"Yes":"No"]})]}),r.jsx("div",{className:"border-t p-2",children:(0,r.jsxs)("button",{onClick:()=>{console.log("Logout button clicked"),a()},disabled:d,className:"flex w-full items-center gap-3 rounded-lg px-3 py-2 text-sm text-white bg-red-600 hover:bg-red-700 disabled:opacity-50 disabled:cursor-not-allowed",children:[r.jsx(A.Z,{className:"h-5 w-5"}),d?"Loading...":"Logout"]})})]})}function P({children:e}){return(0,s.usePathname)(),(0,r.jsxs)("div",{className:"flex h-screen bg-gray-50",children:[r.jsx(S,{}),r.jsx("main",{className:"flex-1 overflow-y-auto p-8",children:e})]})}},79718:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>l});var r=a(10326),s=a(17577),i=a(35047);function l(){(0,i.useRouter)();let[e,t]=(0,s.useState)(""),[a,l]=(0,s.useState)(""),[n,d]=(0,s.useState)(""),[o,c]=(0,s.useState)(!1),u=async t=>{t.preventDefault(),d(""),c(!0);try{let t=await fetch("/api/auth/admin/login",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({username:e,password:a}),credentials:"include"}),r=await t.json();if(!t.ok||!r.success)throw Error(r.message||"Login failed");await new Promise(e=>setTimeout(e,500)),window.location.href="/admin/dashboard"}catch(e){d(e instanceof Error?e.message:"An error occurred during login")}finally{c(!1)}};return r.jsx("div",{className:"flex items-center justify-center min-h-screen bg-gradient-to-br from-pink-50 to-rose-50",children:(0,r.jsxs)("div",{className:"bg-white p-8 rounded-lg shadow-lg w-full max-w-md",children:[r.jsx("h1",{className:"text-2xl font-bold text-center mb-6",children:"Admin Login"}),n&&r.jsx("div",{className:"bg-red-50 border border-red-200 text-red-600 px-4 py-3 rounded mb-4",children:n}),(0,r.jsxs)("form",{onSubmit:u,className:"space-y-4",children:[(0,r.jsxs)("div",{children:[r.jsx("label",{htmlFor:"username",className:"block text-sm font-medium text-gray-700 mb-1",children:"Username"}),r.jsx("input",{type:"text",id:"username",value:e,onChange:e=>t(e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-pink-500",required:!0})]}),(0,r.jsxs)("div",{children:[r.jsx("label",{htmlFor:"password",className:"block text-sm font-medium text-gray-700 mb-1",children:"Password"}),r.jsx("input",{type:"password",id:"password",value:a,onChange:e=>l(e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-pink-500",required:!0})]}),r.jsx("button",{type:"submit",disabled:o,className:"w-full bg-pink-600 text-white py-2 px-4 rounded-md hover:bg-pink-700 focus:outline-none focus:ring-2 focus:ring-pink-500 focus:ring-offset-2 disabled:opacity-50 disabled:cursor-not-allowed",children:o?"Logging in...":"Login"})]})]})})}},51593:(e,t,a)=>{"use strict";a.d(t,{J:()=>l});var r=a(17577),s=a(35047),i=a(40381);function l(){let[e,t]=(0,r.useState)(null),[a,l]=(0,r.useState)(!0),n=(0,s.useRouter)();return{user:e,loading:a,logout:async()=>{console.log("Logout function called");try{let e=await fetch("/api/auth/admin/logout",{method:"POST",credentials:"include"});console.log("Logout response:",e.status,e.ok),e.ok?(t(null),i.ZP.success("Logged out successfully"),n.push("/admin/login")):i.ZP.error("Failed to logout")}catch(e){console.error("Logout error:",e),i.ZP.error("Failed to logout")}},checkAuth:async()=>{try{let e=await fetch("/api/admin/auth/check",{credentials:"include"});if(e.ok){let a=await e.json();t(a.user)}else t(null),window.location.pathname.startsWith("/admin")&&"/admin/login"!==window.location.pathname&&n.push("/admin/login")}catch(e){console.error("Auth check error:",e),t(null)}finally{l(!1)}}}}},95396:(e,t,a)=>{"use strict";a.d(t,{Z:()=>r});let r=(0,a(76557).Z)("BarChart",[["line",{x1:"12",x2:"12",y1:"20",y2:"10",key:"1vz5eb"}],["line",{x1:"18",x2:"18",y1:"20",y2:"4",key:"cun8e5"}],["line",{x1:"6",x2:"6",y1:"20",y2:"16",key:"hq0ia6"}]])},5751:(e,t,a)=>{"use strict";a.d(t,{Z:()=>r});let r=(0,a(76557).Z)("Cookie",[["path",{d:"M12 2a10 10 0 1 0 10 10 4 4 0 0 1-5-5 4 4 0 0 1-5-5",key:"laymnq"}],["path",{d:"M8.5 8.5v.01",key:"ue8clq"}],["path",{d:"M16 15.5v.01",key:"14dtrp"}],["path",{d:"M12 12v.01",key:"u5ubse"}],["path",{d:"M11 17v.01",key:"1hyl5a"}],["path",{d:"M7 14v.01",key:"uct60s"}]])},88319:(e,t,a)=>{"use strict";a.d(t,{Z:()=>r});let r=(0,a(76557).Z)("Database",[["ellipse",{cx:"12",cy:"5",rx:"9",ry:"3",key:"msslwz"}],["path",{d:"M3 5V19A9 3 0 0 0 21 19V5",key:"1wlel7"}],["path",{d:"M3 12A9 3 0 0 0 21 12",key:"mv7ke4"}]])},36283:(e,t,a)=>{"use strict";a.d(t,{Z:()=>r});let r=(0,a(76557).Z)("FileText",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]])},71709:(e,t,a)=>{"use strict";a.d(t,{Z:()=>r});let r=(0,a(76557).Z)("Image",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]])},24319:(e,t,a)=>{"use strict";a.d(t,{Z:()=>r});let r=(0,a(76557).Z)("LayoutDashboard",[["rect",{width:"7",height:"9",x:"3",y:"3",rx:"1",key:"10lvy0"}],["rect",{width:"7",height:"5",x:"14",y:"3",rx:"1",key:"16une8"}],["rect",{width:"7",height:"9",x:"14",y:"12",rx:"1",key:"1hutg5"}],["rect",{width:"7",height:"5",x:"3",y:"16",rx:"1",key:"ldoo1y"}]])},5932:(e,t,a)=>{"use strict";a.d(t,{Z:()=>r});let r=(0,a(76557).Z)("Mail",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]])},40617:(e,t,a)=>{"use strict";a.d(t,{Z:()=>r});let r=(0,a(76557).Z)("MessageSquare",[["path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z",key:"1lielz"}]])},48705:(e,t,a)=>{"use strict";a.d(t,{Z:()=>r});let r=(0,a(76557).Z)("Package",[["path",{d:"m7.5 4.27 9 5.15",key:"1c824w"}],["path",{d:"M21 8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16Z",key:"hh9hay"}],["path",{d:"m3.3 7 8.7 5 8.7-5",key:"g66t2b"}],["path",{d:"M12 22V12",key:"d0xqtd"}]])},88378:(e,t,a)=>{"use strict";a.d(t,{Z:()=>r});let r=(0,a(76557).Z)("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]])},57671:(e,t,a)=>{"use strict";a.d(t,{Z:()=>r});let r=(0,a(76557).Z)("ShoppingCart",[["circle",{cx:"8",cy:"21",r:"1",key:"jimo8o"}],["circle",{cx:"19",cy:"21",r:"1",key:"13723u"}],["path",{d:"M2.05 2.05h2l2.66 12.42a2 2 0 0 0 2 1.58h9.78a2 2 0 0 0 1.95-1.57l1.65-7.43H5.12",key:"9zh506"}]])},22915:(e,t,a)=>{"use strict";a.d(t,{Z:()=>r});let r=(0,a(76557).Z)("Store",[["path",{d:"m2 7 4.41-4.41A2 2 0 0 1 7.83 2h8.34a2 2 0 0 1 1.42.59L22 7",key:"ztvudi"}],["path",{d:"M4 12v8a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2v-8",key:"1b2hhj"}],["path",{d:"M15 22v-4a2 2 0 0 0-2-2h-2a2 2 0 0 0-2 2v4",key:"2ebpfo"}],["path",{d:"M2 7h20",key:"1fcdvo"}],["path",{d:"M22 7v3a2 2 0 0 1-2 2v0a2.7 2.7 0 0 1-1.59-.63.7.7 0 0 0-.82 0A2.7 2.7 0 0 1 16 12a2.7 2.7 0 0 1-1.59-.63.7.7 0 0 0-.82 0A2.7 2.7 0 0 1 12 12a2.7 2.7 0 0 1-1.59-.63.7.7 0 0 0-.82 0A2.7 2.7 0 0 1 8 12a2.7 2.7 0 0 1-1.59-.63.7.7 0 0 0-.82 0A2.7 2.7 0 0 1 4 12v0a2 2 0 0 1-2-2V7",key:"jon5kx"}]])},40765:(e,t,a)=>{"use strict";a.d(t,{Z:()=>r});let r=(0,a(76557).Z)("Tag",[["path",{d:"M12.586 2.586A2 2 0 0 0 11.172 2H4a2 2 0 0 0-2 2v7.172a2 2 0 0 0 .586 1.414l8.704 8.704a2.426 2.426 0 0 0 3.42 0l6.58-6.58a2.426 2.426 0 0 0 0-3.42z",key:"vktsd0"}],["circle",{cx:"7.5",cy:"7.5",r:".5",fill:"currentColor",key:"kqv944"}]])},53468:(e,t,a)=>{"use strict";a.d(t,{Z:()=>r});let r=(0,a(76557).Z)("Target",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"6",key:"1vlfrh"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]])},14228:(e,t,a)=>{"use strict";a.d(t,{Z:()=>r});let r=(0,a(76557).Z)("Truck",[["path",{d:"M14 18V6a2 2 0 0 0-2-2H4a2 2 0 0 0-2 2v11a1 1 0 0 0 1 1h2",key:"wrbu53"}],["path",{d:"M15 18H9",key:"1lyqi6"}],["path",{d:"M19 18h2a1 1 0 0 0 1-1v-3.65a1 1 0 0 0-.22-.624l-3.48-4.35A1 1 0 0 0 17.52 8H14",key:"lysw3i"}],["circle",{cx:"17",cy:"18",r:"2",key:"332jqn"}],["circle",{cx:"7",cy:"18",r:"2",key:"19iecd"}]])},24061:(e,t,a)=>{"use strict";a.d(t,{Z:()=>r});let r=(0,a(76557).Z)("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]])},66050:(e,t,a)=>{"use strict";a.d(t,{Z:()=>r});let r=(0,a(76557).Z)("Warehouse",[["path",{d:"M22 8.35V20a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2V8.35A2 2 0 0 1 3.26 6.5l8-3.2a2 2 0 0 1 1.48 0l8 3.2A2 2 0 0 1 22 8.35Z",key:"gksnxg"}],["path",{d:"M6 18h12",key:"9pbo8z"}],["path",{d:"M6 14h12",key:"4cwo0f"}],["rect",{width:"12",height:"12",x:"6",y:"10",key:"apd30q"}]])},90596:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>r});let r=(0,a(68570).createProxy)(String.raw`C:\Users\ASUS\AngularWebApp\crumbled-website\app\admin\layout.tsx#default`)},38358:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>r});let r=(0,a(68570).createProxy)(String.raw`C:\Users\ASUS\AngularWebApp\crumbled-website\app\admin\login\page.tsx#default`)}};var t=require("../../../webpack-runtime.js");t.C(e);var a=e=>t(t.s=e),r=t.X(0,[9276,4303,7100],()=>a(75981));module.exports=r})();